"use strict"; //Händelsehanterare

document.getElementById('addCourse').addEventListener('submit', addCourse); //Länk till webbtjänsten

var url = 'http://studenter.miun.se/~reho0301/dt173g/moment5/webservice/webservice.php'; //Funktion för JSON
//Lägg till kurs, POST

function addCourse(e) {
  e.preventDefault();
  var code = document.getElementById('code').value;
  var name = document.getElementById('name').value;
  var prog = document.getElementById('prog').value;
  var plan = document.getElementById('plan').value;
  fetch(url, {
    method: 'POST',
    body: JSON.stringify({
      code: code,
      name: name,
      prog: prog,
      plan: plan
    })
  }).then(function (res) {
    return res.json();
  }).then(function (data) {
    console.log(data);
    getCourses(); //Kalla
  })["catch"](function (err) {
    return console.log(err);
  });
} //Hämta kurser, GET


function getCourses() {
  fetch(url).then(function (res) {
    return res.json();
  }).then(function (data) {
    var output = "";
    data.forEach(function (courses) {
      output += "\n        <tr>\n        <td>".concat(courses.code, "</td>\n        <td>").concat(courses.name, "</td>\n        <td>").concat(courses.prog, "</td>\n        <td><a href='").concat(courses.plan, "'target=\"_blank\">Webbl\xE4nk</a></td>\n        <td><button onclick='updateCourse(").concat(courses.id, ")'id=\"update\">Uppdatera</button></td>\n        <td><button onclick='delCourse(").concat(courses.id, ")'id=\"delete\">Radera</button></td>\n        </tr>\n        ");
    });
    document.getElementById('output').innerHTML = output;
  });
}

getCourses(); //Uppdatera kurs, PUT

function updateCourse(id) {
  fetch(url, {
    method: 'PUT',
    body: JSON.stringify({
      id: id
    })
  }).then(function (res) {
    return res.json();
  }).then(function (data) {
    console.log(data);
    getCourses(); //Kalla på hämta kurser
  })["catch"](function (err) {
    return console.log(err);
  });
} //Radera kurs, DELETE


function delCourse(id) {
  fetch(url, {
    method: 'DELETE',
    body: JSON.stringify({
      id: id
    })
  }).then(function (res) {
    return res.json();
  }).then(function (data) {
    console.log(data);
    getCourses(); //Kalla på hämta kurser
  })["catch"](function (err) {
    return console.log(err);
  });
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL21haW4uanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJhZGRDb3Vyc2UiLCJ1cmwiLCJlIiwicHJldmVudERlZmF1bHQiLCJjb2RlIiwidmFsdWUiLCJuYW1lIiwicHJvZyIsInBsYW4iLCJmZXRjaCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidGhlbiIsInJlcyIsImpzb24iLCJkYXRhIiwiY29uc29sZSIsImxvZyIsImdldENvdXJzZXMiLCJlcnIiLCJvdXRwdXQiLCJmb3JFYWNoIiwiY291cnNlcyIsImlkIiwiaW5uZXJIVE1MIiwidXBkYXRlQ291cnNlIiwiZGVsQ291cnNlIl0sIm1hcHBpbmdzIjoiQUFBQSxhLENBQ0E7O0FBQ0FBLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixXQUF4QixFQUFxQ0MsZ0JBQXJDLENBQXNELFFBQXRELEVBQWdFQyxTQUFoRSxFLENBRUE7O0FBQ0EsSUFBTUMsR0FBRyxHQUFHLDZFQUFaLEMsQ0FHQTtBQUNBOztBQUNBLFNBQVNELFNBQVQsQ0FBbUJFLENBQW5CLEVBQXFCO0FBQ25CQSxFQUFBQSxDQUFDLENBQUNDLGNBQUY7QUFFQSxNQUFJQyxJQUFJLEdBQUdQLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixNQUF4QixFQUFnQ08sS0FBM0M7QUFDQSxNQUFJQyxJQUFJLEdBQUdULFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixNQUF4QixFQUFnQ08sS0FBM0M7QUFDQSxNQUFJRSxJQUFJLEdBQUdWLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixNQUF4QixFQUFnQ08sS0FBM0M7QUFDQSxNQUFJRyxJQUFJLEdBQUdYLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixNQUF4QixFQUFnQ08sS0FBM0M7QUFFQUksRUFBQUEsS0FBSyxDQUFDUixHQUFELEVBQU07QUFDVFMsSUFBQUEsTUFBTSxFQUFFLE1BREM7QUFFVEMsSUFBQUEsSUFBSSxFQUFDQyxJQUFJLENB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LEdBQVosQ0FBVDtBQUFBLEdBVFA7QUFVRCIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vL0jDpG5kZWxzZWhhbnRlcmFyZVxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZENvdXJzZScpLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGFkZENvdXJzZSk7XG5cbi8vTMOkbmsgdGlsbCB3ZWJidGrDpG5zdGVuXG5jb25zdCB1cmwgPSAnaHR0cDovL3N0dWRlbnRlci5taXVuLnNlL35yZWhvMDMwMS9kdDE3M2cvbW9tZW50NS93ZWJzZXJ2aWNlL3dlYnNlcnZpY2UucGhwJztcblxuXG4vL0Z1bmt0aW9uIGbDtnIgSlNPTlxuLy9Mw6RnZyB0aWxsIGt1cnMsIFBPU1RcbmZ1bmN0aW9uIGFkZENvdXJzZShlKXtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGxldCBjb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvZGUnKS52YWx1ZTtcbiAgbGV0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmFtZScpLnZhbHVlO1xuICBsZXQgcHJvZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9nJykudmFsdWU7XG4gIGxldCBwbGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYW4nKS52YWx1ZTtcblxuICBmZXRjaCh1cmwsIHtcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBib2R5OkpTT04uc3RyaW5naWZ5KHtjb2RlOmNvZGUsIG5hbWU6bmFtZSwgcHJvZzpwcm9nLCBwbGFuOnBsYW59KVxuICB9KVxuICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKSBcbiAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICBnZXRDb3Vyc2VzKCk7ICAgICAvL0thbGxhXG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxufVxuXG4vL0jDpG10YSBrdXJzZXIsIEdFVFxuZnVuY3Rpb24gZ2V0Q291cnNlcygpe1xuICBmZXRjaCh1cmwpXG4gIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBsZXQgb3V0cHV0ID0gXCJcIjtcbiAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbihjb3Vyc2VzKXtcbiAgICAgICAgb3V0cHV0ICs9IGBcbiAgICAgICAgPHRyPlxuICAgICAgICA8dGQ+JHtjb3Vyc2VzLmNvZGV9PC90ZD5cbiAgICAgICAgPHRkPiR7Y291cnNlcy5uYW1lfTwvdGQ+XG4gICAgICAgIDx0ZD4ke2NvdXJzZXMucHJvZ308L3RkPlxuICAgICAgICA8dGQ+PGEgaHJlZj0nJHtjb3Vyc2VzLnBsYW59J3RhcmdldD1cIl9ibGFua1wiPldlYmJsw6RuazwvYT48L3RkPlxuICAgICAgICA8dGQ+PGJ1dHRvbiBvbmNsaWNrPSd1cGRhdGVDb3Vyc2UoJHtjb3Vyc2VzLmlkfSknaWQ9XCJ1cGRhdGVcIj5VcHBkYXRlcmE8L2J1dHRvbj48L3RkPlxuICAgICAgICA8dGQ+PGJ1dHRvbiBvbmNsaWNrPSdkZWxDb3Vyc2UoJHtjb3Vyc2VzLmlkfSknaWQ9XCJkZWxldGVcIj5SYWRlcmE8L2J1dHRvbj48L3RkPlxuICAgICAgICA8L3RyPlxuICAgICAgICBgO1xuICAgICAgfSk7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3V0cHV0JykuaW5uZXJIVE1MID0gb3V0cHV0O1xuICAgIH0pXG59XG5nZXRDb3Vyc2VzKCk7XG5cbi8vVXBwZGF0ZXJhIGt1cnMsIFBVVFxuZnVuY3Rpb24gdXBkYXRlQ291cnNlKGlkKXtcbiAgXG4gIGZldGNoKHVybCwge1xuICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgYm9keTpKU09OLnN0cmluZ2lmeSh7aWQ6aWR9KVxuICB9KVxuICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKSBcbiAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICBnZXRDb3Vyc2VzKCk7ICAgICAvL0thbGxhIHDDpSBow6RtdGEga3Vyc2VyXG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxufVxuXG5cbi8vUmFkZXJhIGt1cnMsIERFTEVURVxuZnVuY3Rpb24gZGVsQ291cnNlKGlkKXtcblxuICBmZXRjaCh1cmwsIHtcbiAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgIGJvZHk6SlNPTi5zdHJpbmdpZnkoe2lkOmlkfSlcbiAgfSlcbiAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSkgXG4gIC50aGVuKChkYXRhKSA9PiB7XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgZ2V0Q291cnNlcygpOyAgICAgLy9LYWxsYSBww6UgaMOkbXRhIGt1cnNlclxuICB9KVxuICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcbn1cblxuIl19
