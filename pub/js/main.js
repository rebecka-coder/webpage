"use strict"; //Händelsehanterare

document.getElementById('addCourse').addEventListener('submit', addCourse); //Länk till webbtjänsten

var url = 'http://localhost:8080/fetch%20api/moment%205%20-%20rest%20api/webservice.php'; //Funktion för JSON
//Lägg till kurs, POST

function addCourse(e) {
  e.preventDefault();
  var code = document.getElementById('code').value;
  var name = document.getElementById('name').value;
  var prog = document.getElementById('prog').value;
  var plan = document.getElementById('plan').value;
  fetch(url, {
    method: 'POST',
    body: JSON.stringify({
      code: code,
      name: name,
      prog: prog,
      plan: plan
    })
  }).then(function (res) {
    return res.json();
  }).then(function (data) {
    console.log(data);
    getCourses(); //Kalla
  })["catch"](function (err) {
    return console.log(err);
  });
} //Hämta kurser, GET


function getCourses() {
  fetch(url).then(function (res) {
    return res.json();
  }).then(function (data) {
    var output = "";
    data.forEach(function (courses) {
      output += "\n        <tr>\n        <td>".concat(courses.code, "</td>\n        <td>").concat(courses.name, "</td>\n        <td>").concat(courses.prog, "</td>\n        <td><a href='").concat(courses.plan, "'target=\"_blank\">Webbl\xE4nk</a></td>\n        <td><button onclick='updateCourse(").concat(courses.id, ")'id=\"update\">Uppdatera</button></td>\n        <td><button onclick='delCourse(").concat(courses.id, ")'id=\"delete\">Radera</button></td>\n        </tr>\n        ");
    });
    document.getElementById('output').innerHTML = output;
  });
}

getCourses(); //Uppdatera kurs, PUT

function updateCourse(id) {
  fetch(url, {
    method: 'PUT',
    body: JSON.stringify({
      id: id
    })
  }).then(function (res) {
    return res.json();
  }).then(function (data) {
    console.log(data);
    getCourses(); //Kalla på hämta kurser
  })["catch"](function (err) {
    return console.log(err);
  });
} //Radera kurs, DELETE


function delCourse(id) {
  fetch(url, {
    method: 'DELETE',
    body: JSON.stringify({
      id: id
    })
  }).then(function (res) {
    return res.json();
  }).then(function (data) {
    console.log(data);
    getCourses(); //Kalla på hämta kurser
  })["catch"](function (err) {
    return console.log(err);
  });
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL21haW4uanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJhZGRDb3Vyc2UiLCJ1cmwiLCJlIiwicHJldmVudERlZmF1bHQiLCJjb2RlIiwidmFsdWUiLCJuYW1lIiwicHJvZyIsInBsYW4iLCJmZXRjaCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidGhlbiIsInJlcyIsImpzb24iLCJkYXRhIiwiY29uc29sZSIsImxvZyIsImdldENvdXJzZXMiLCJlcnIiLCJvdXRwdXQiLCJmb3JFYWNoIiwiY291cnNlcyIsImlkIiwiaW5uZXJIVE1MIiwidXBkYXRlQ291cnNlIiwiZGVsQ291cnNlIl0sIm1hcHBpbmdzIjoiQUFBQSxhLENBQ0E7O0FBQ0FBLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixXQUF4QixFQUFxQ0MsZ0JBQXJDLENBQXNELFFBQXRELEVBQWdFQyxTQUFoRSxFLENBRUE7O0FBQ0EsSUFBTUMsR0FBRyxHQUFHLDhFQUFaLEMsQ0FHQTtBQUNBOztBQUNBLFNBQVNELFNBQVQsQ0FBbUJFLENBQW5CLEVBQXFCO0FBQ25CQSxFQUFBQSxDQUFDLENBQUNDLGNBQUY7QUFFQSxNQUFJQyxJQUFJLEdBQUdQLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixNQUF4QixFQUFnQ08sS0FBM0M7QUFDQSxNQUFJQyxJQUFJLEdBQUdULFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixNQUF4QixFQUFnQ08sS0FBM0M7QUFDQSxNQUFJRSxJQUFJLEdBQUdWLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixNQUF4QixFQUFnQ08sS0FBM0M7QUFDQSxNQUFJRyxJQUFJLEdBQUdYLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixNQUF4QixFQUFnQ08sS0FBM0M7QUFFQUksRUFBQUEsS0FBSyxDQUFDUixHQUFELEVBQU07QUFDVFMsSUFBQUEsTUFBTSxFQUFFLE1BREM7QUFFVEMsSUFBQUEsSUFBSSxFQUFDQyxJQUFJLENB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LEdBQVosQ0FBVDtBQUFBLEdBVFA7QUFVRCIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vL0jDpG5kZWxzZWhhbnRlcmFyZVxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZENvdXJzZScpLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGFkZENvdXJzZSk7XG5cbi8vTMOkbmsgdGlsbCB3ZWJidGrDpG5zdGVuXG5jb25zdCB1cmwgPSAnaHR0cDovL2xvY2FsaG9zdDo4MDgwL2ZldGNoJTIwYXBpL21vbWVudCUyMDUlMjAtJTIwcmVzdCUyMGFwaS93ZWJzZXJ2aWNlLnBocCc7XG5cblxuLy9GdW5rdGlvbiBmw7ZyIEpTT05cbi8vTMOkZ2cgdGlsbCBrdXJzLCBQT1NUXG5mdW5jdGlvbiBhZGRDb3Vyc2UoZSl7XG4gIGUucHJldmVudERlZmF1bHQoKTtcblxuICBsZXQgY29kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2RlJykudmFsdWU7XG4gIGxldCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hbWUnKS52YWx1ZTtcbiAgbGV0IHByb2cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZycpLnZhbHVlO1xuICBsZXQgcGxhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbGFuJykudmFsdWU7XG5cbiAgZmV0Y2godXJsLCB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgYm9keTpKU09OLnN0cmluZ2lmeSh7Y29kZTpjb2RlLCBuYW1lOm5hbWUsIHByb2c6cHJvZywgcGxhbjpwbGFufSlcbiAgfSlcbiAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSkgXG4gIC50aGVuKChkYXRhKSA9PiB7XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgZ2V0Q291cnNlcygpOyAgICAgLy9LYWxsYVxuICB9KVxuICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcbn1cblxuLy9Iw6RtdGEga3Vyc2VyLCBHRVRcbmZ1bmN0aW9uIGdldENvdXJzZXMoKXtcbiAgZmV0Y2godXJsKVxuICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgbGV0IG91dHB1dCA9IFwiXCI7XG4gICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24oY291cnNlcyl7XG4gICAgICAgIG91dHB1dCArPSBgXG4gICAgICAgIDx0cj5cbiAgICAgICAgPHRkPiR7Y291cnNlcy5jb2RlfTwvdGQ+XG4gICAgICAgIDx0ZD4ke2NvdXJzZXMubmFtZX08L3RkPlxuICAgICAgICA8dGQ+JHtjb3Vyc2VzLnByb2d9PC90ZD5cbiAgICAgICAgPHRkPjxhIGhyZWY9JyR7Y291cnNlcy5wbGFufSd0YXJnZXQ9XCJfYmxhbmtcIj5XZWJibMOkbms8L2E+PC90ZD5cbiAgICAgICAgPHRkPjxidXR0b24gb25jbGljaz0ndXBkYXRlQ291cnNlKCR7Y291cnNlcy5pZH0pJ2lkPVwidXBkYXRlXCI+VXBwZGF0ZXJhPC9idXR0b24+PC90ZD5cbiAgICAgICAgPHRkPjxidXR0b24gb25jbGljaz0nZGVsQ291cnNlKCR7Y291cnNlcy5pZH0pJ2lkPVwiZGVsZXRlXCI+UmFkZXJhPC9idXR0b24+PC90ZD5cbiAgICAgICAgPC90cj5cbiAgICAgICAgYDtcbiAgICAgIH0pO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ291dHB1dCcpLmlubmVySFRNTCA9IG91dHB1dDtcbiAgICB9KVxufVxuZ2V0Q291cnNlcygpO1xuXG4vL1VwcGRhdGVyYSBrdXJzLCBQVVRcbmZ1bmN0aW9uIHVwZGF0ZUNvdXJzZShpZCl7XG4gIFxuICBmZXRjaCh1cmwsIHtcbiAgICBtZXRob2Q6ICdQVVQnLFxuICAgIGJvZHk6SlNPTi5zdHJpbmdpZnkoe2lkOmlkfSlcbiAgfSlcbiAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSkgXG4gIC50aGVuKChkYXRhKSA9PiB7XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgZ2V0Q291cnNlcygpOyAgICAgLy9LYWxsYSBww6UgaMOkbXRhIGt1cnNlclxuICB9KVxuICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcbn1cblxuXG4vL1JhZGVyYSBrdXJzLCBERUxFVEVcbmZ1bmN0aW9uIGRlbENvdXJzZShpZCl7XG5cbiAgZmV0Y2godXJsLCB7XG4gICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICBib2R5OkpTT04uc3RyaW5naWZ5KHtpZDppZH0pXG4gIH0pXG4gIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpIFxuICAudGhlbigoZGF0YSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgIGdldENvdXJzZXMoKTsgICAgIC8vS2FsbGEgcMOlIGjDpG10YSBrdXJzZXJcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXG59XG5cbiJdfQ==
